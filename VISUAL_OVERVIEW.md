# ğŸ¨ Visual System Overview

## ğŸ—ï¸ Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           KAFUMI SYSTEM OVERVIEW                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    CAFÃ‰ OWNER           â”‚
â”‚    (Submitter)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ Visits form
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SUBMISSION FORM                                      â”‚
â”‚                      /submit-cafe (page.tsx)                                 â”‚
â”‚                                                                              â”‚
â”‚  ğŸ“ CafÃ© Details:                    ğŸ½ï¸ Menu Builder:                       â”‚
â”‚     â€¢ Name, City, Address              â€¢ Add sections                       â”‚
â”‚     â€¢ Contact, Maps, Social            â€¢ Add dishes                         â”‚
â”‚     â€¢ Hours, Days                      â€¢ Mark recommended                   â”‚
â”‚                                        â€¢ Unlimited items                    â”‚
â”‚  ğŸ¨ Preferences:                                                            â”‚
â”‚     â€¢ Purpose (max 2)               ğŸ“¸ File Uploads:                       â”‚
â”‚     â€¢ Ambience (max 3)                 â€¢ Cover image                       â”‚
â”‚     â€¢ Amenities (any)                  â€¢ 4-5 photos                        â”‚
â”‚     â€¢ Food types                       â€¢ Menu file (optional)              â”‚
â”‚     â€¢ Price (auto-calc range)                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ Submit (POST)
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BACKEND API                                          â”‚
â”‚                    /api/submit-cafe/route.ts                                 â”‚
â”‚                                                                              â”‚
â”‚  1. Receives FormData                                                       â”‚
â”‚  2. Extracts text fields  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  3. Extracts files         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚                              â”‚
â”‚                                      â”‚       â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚       â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                                                  â”‚
                  â”‚ Upload files                    Append row       â”‚
                  â–¼                                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      GOOGLE DRIVE               â”‚              â”‚   GOOGLE SHEETS          â”‚
â”‚   (File Storage)                â”‚              â”‚   (Data Storage)         â”‚
â”‚                                 â”‚              â”‚                          â”‚
â”‚  ğŸ“ Folder ID:                  â”‚              â”‚  ğŸ“Š Sheet ID:            â”‚
â”‚     1jdqq4q9BB9Uw...            â”‚              â”‚     1aDLKZ3KjX...        â”‚
â”‚                                 â”‚              â”‚                          â”‚
â”‚  Files Uploaded:                â”‚              â”‚  Row Added:              â”‚
â”‚  â€¢ cover_timestamp_name.jpg     â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â€¢ photo_timestamp_name1.jpg    â”‚              â”‚  â”‚ A: CafÃ© Name     â”‚   â”‚
â”‚  â€¢ photo_timestamp_name2.jpg    â”‚              â”‚  â”‚ B: Contact       â”‚   â”‚
â”‚  â€¢ photo_timestamp_name3.jpg â—„â”€â”€â”¼â”€â”€â”           â”‚  â”‚ C: Contact Users â”‚   â”‚
â”‚  â€¢ photo_timestamp_name4.jpg    â”‚  â”‚           â”‚  â”‚ ...             â”‚   â”‚
â”‚  â€¢ menu_timestamp_name.pdf      â”‚  â”‚           â”‚  â”‚ V: Menu JSON    â”‚   â”‚
â”‚                                 â”‚  â”‚           â”‚  â”‚ X: Cover Link â—„â”€â”¼â”€â”€â”€â”¤
â”‚  Permissions:                   â”‚  â”‚           â”‚  â”‚ Y: Photo Links â—„â”¼â”€â”€â”€â”˜
â”‚  âœ“ Public viewing              â”‚  â”‚           â”‚  â”‚ Z: Menu Link    â”‚
â”‚                                 â”‚  â”‚           â”‚  â”‚ ...             â”‚
â”‚  Returns:                       â”‚  â”‚           â”‚  â”‚ AC-AH: (Empty)  â”‚
â”‚  â€¢ Web view links â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                    â”‚           â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                              â”‚
                                                              â”‚ Admin edits
                                                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ADMIN REVIEW                                        â”‚
â”‚                    (Manual in Google Sheets)                                 â”‚
â”‚                                                                              â”‚
â”‚  Fills Admin Columns:                                                       â”‚
â”‚  â€¢ AC: Rating (0-5) â­                                                      â”‚
â”‚  â€¢ AD: Review Count ğŸ“Š                                                      â”‚
â”‚  â€¢ AE: Promoter Rating (0-10) ğŸ¯                                           â”‚
â”‚  â€¢ AF: Approved = "Yes" âœ…  â† CRITICAL!                                    â”‚
â”‚  â€¢ AG: Date Added ğŸ“…                                                        â”‚
â”‚  â€¢ AH: Last Updated ğŸ”„                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ Saves sheet
                                â”‚
                                â”‚ Wait 5 minutes (cache refresh)
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATA FETCHING API                                    â”‚
â”‚                      /api/get-cafes/route.ts                                 â”‚
â”‚                                                                              â”‚
â”‚  1. Reads Google Sheets (range A2:AH)                                       â”‚
â”‚  2. Filters: WHERE Approved (AF) = "Yes"                                    â”‚
â”‚  3. Parses menu JSON (column V)                                             â”‚
â”‚  4. Parses photo links (column Y, split by ||)                              â”‚
â”‚  5. Extracts coordinates from Maps link                                     â”‚
â”‚  6. Returns JSON array of cafÃ©s                                             â”‚
â”‚  7. Caches for 5 minutes                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ Returns JSON
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       CAFÃ‰ DATA SERVICE                                      â”‚
â”‚                    lib/cafe-data-service.ts                                  â”‚
â”‚                                                                              â”‚
â”‚  â€¢ Fetches from /api/get-cafes                                              â”‚
â”‚  â€¢ Caches data for 5 minutes                                                â”‚
â”‚  â€¢ Provides: getCafes(), getCafeById(), searchCafes()                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ Used by pages
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           USER PAGES                                         â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Browse     â”‚  â”‚   Guided     â”‚  â”‚   Random     â”‚  â”‚   Detail     â”‚  â”‚
â”‚  â”‚   /browse    â”‚  â”‚   /guided    â”‚  â”‚   /random    â”‚  â”‚   /cafe/[id] â”‚  â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚
â”‚  â”‚  â€¢ Grid view â”‚  â”‚  â€¢ Questions â”‚  â”‚  â€¢ Surprise  â”‚  â”‚  â€¢ Photos âœ“  â”‚  â”‚
â”‚  â”‚  â€¢ Filters   â”‚  â”‚  â€¢ Match %   â”‚  â”‚  â€¢ Single    â”‚  â”‚  â€¢ Menu      â”‚  â”‚
â”‚  â”‚  â€¢ Search    â”‚  â”‚  â€¢ Results   â”‚  â”‚    cafÃ©      â”‚  â”‚  â€¢ Vibe      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â€¢ Contact   â”‚  â”‚
â”‚                            â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚ Uses                                           â”‚
â”‚                            â–¼                                                â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚                   â”‚   Match Engine   â”‚                                      â”‚
â”‚                   â”‚   lib/match.ts   â”‚                                      â”‚
â”‚                   â”‚                  â”‚                                      â”‚
â”‚                   â”‚  New Weights:    â”‚                                      â”‚
â”‚                   â”‚  â€¢ Mood: 20%     â”‚                                      â”‚
â”‚                   â”‚  â€¢ Ambience: 11% â”‚                                      â”‚
â”‚                   â”‚  â€¢ Amenities: 9% â”‚                                      â”‚
â”‚                   â”‚  â€¢ Food: 12%     â”‚                                      â”‚
â”‚                   â”‚  â€¢ Price: 12%    â”‚                                      â”‚
â”‚                   â”‚  â€¢ Dishes: 12%   â”‚                                      â”‚
â”‚                   â”‚  â€¢ Rating: 11%   â”‚                                      â”‚
â”‚                   â”‚  â€¢ Promoter: 13% â”‚                                      â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ Renders for
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      END USERS          â”‚
â”‚      (CafÃ© Seekers)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Synchronization Flow

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                       TIME-BASED FLOW                              â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

T+0 sec     â”‚  CafÃ© owner submits form
            â”‚  â†“
T+1-5 sec   â”‚  Files upload to Drive + Data to Sheets
            â”‚  â†“
T+5 sec     â”‚  Success message shown
            â”‚  â†“
            â”‚  [WAITING FOR ADMIN]
            â”‚  â†“
T+X min     â”‚  Admin reviews in Sheets
            â”‚  Admin fills AC-AH columns
            â”‚  Admin sets Approved = "Yes"
            â”‚  â†“
T+X+5 min   â”‚  Cache expires, API re-fetches
            â”‚  â†“
T+X+5 min   â”‚  CafÃ© appears on website!
            â”‚  â†“
            â”‚  Users can now see the cafÃ©
```

---

## ğŸ“Š Google Sheets Column Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GOOGLE SHEETS STRUCTURE                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ROW 1 (Header):
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ A â”‚ CafÃ© Name         â”‚ B â”‚ Contact Kafumi â”‚ C â”‚ Contact Users      â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ D â”‚ City              â”‚ E â”‚ Address        â”‚ F â”‚ Google Maps Link   â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ G â”‚ Email             â”‚ H â”‚ Instagram      â”‚ I â”‚ Facebook           â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ J â”‚ Website           â”‚ K â”‚ Opening Hours  â”‚ L â”‚ Closing Hours      â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ M â”‚ Opening Days      â”‚ N â”‚ Avg Price      â”‚ O â”‚ Price Range        â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ P â”‚ Pure Veg          â”‚ Q â”‚ Description    â”‚ R â”‚ Purpose            â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ S â”‚ Ambience Type     â”‚ T â”‚ Amenities      â”‚ U â”‚ Food & Drink Types â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ V â”‚ Menu (JSON)       â”‚ W â”‚ Best 3 Dishes  â”‚ X â”‚ Cover Image Link   â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Y â”‚ Photo Links       â”‚ Z â”‚ Menu File Link â”‚AA â”‚ Consent            â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚AB â”‚ Submission Date   â”‚AC â”‚ Rating â­      â”‚AD â”‚ Review Count ğŸ“Š    â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚AE â”‚ Promoter RatingğŸ¯ â”‚AF â”‚ Approved âœ…     â”‚AG â”‚ Date Added ğŸ“…      â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚AH â”‚ Last Updated ğŸ”„   â”‚   â”‚                â”‚   â”‚                    â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FORM FILLS: A-AB (automatic)
ADMIN FILLS: AC-AH (manual)

CRITICAL: Column AF (Approved) must be exactly "Yes" for cafÃ© to appear!
```

---

## ğŸ¯ Matching Algorithm Breakdown

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  MATCH PERCENTAGE CALCULATION                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Preferences              CafÃ© Attributes
      â”‚                              â”‚
      â”œâ”€â–º Mood â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–º Purpose
      â”‚   (20% weight)               â”‚   Match? +20%
      â”‚                              â”‚
      â”œâ”€â–º Ambience â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–º Vibe
      â”‚   (11% weight)               â”‚   Partial match Ã— 11%
      â”‚                              â”‚
      â”œâ”€â–º Amenities â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–º Amenities
      â”‚   (9% weight)                â”‚   Partial match Ã— 9%
      â”‚                              â”‚
      â”œâ”€â–º Food & Drinks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–º Food Types
      â”‚   (12% weight)               â”‚   Partial match Ã— 12%
      â”‚                              â”‚
      â”œâ”€â–º Price Range â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â–º Price Range
      â”‚   (12% weight)               â”‚   Proximity Ã— 12%
      â”‚                              â”‚
      â”‚                              â”œâ”€â–º Best Dish
      â”‚   (12% weight)               â”‚   Has dish? +12%
      â”‚                              â”‚
      â”‚                              â”œâ”€â–º Rating (0-5)
      â”‚   (11% weight)               â”‚   (rating/5) Ã— 11%
      â”‚                              â”‚
      â”‚                              â””â”€â–º Promoter Rating (0-10)
          (13% weight)                   (rating/10) Ã— 13%

                    â†“ SUM ALL â†“
              
              Final Match % (0-100%)
                       â”‚
                       â–¼
              Sort cafÃ©s by match %
                       â”‚
                       â–¼
              Display results to user
```

---

## ğŸ–¼ï¸ Photo Storage & Display

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PHOTO HANDLING FLOW                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

UPLOAD:
User selects files â†’ FormData â†’ API receives
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                  â”‚
           Cover Image (1)                    Photos (4-5)
                    â”‚                                  â”‚
                    â–¼                                  â–¼
          uploadToDrive()                     uploadToDrive() Ã— 4-5
                    â”‚                                  â”‚
                    â–¼                                  â–¼
          Returns link                       Returns links array
                    â”‚                                  â”‚
                    â–¼                                  â–¼
          Store in column X              Store in column Y (join with ||)
                                                       â”‚
                                                       â”‚
EXAMPLE:                                              â”‚
X: https://drive.google.com/file/d/ABC123/view        â”‚
Y: https://drive.google.com/.../DEF456/view||https://drive.google.com/.../GHI789/view||...

DISPLAY:
Read from Sheet â†’ Parse column Y (split by ||)
                       â”‚
                       â–¼
              Array of photo URLs
                       â”‚
                       â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                         â”‚
    CafÃ© Card Page            Detail Page
    (shows cover)            (shows all photos)
          â”‚                         â”‚
          â–¼                         â–¼
    Column X                  [Column X, ...Column Y]
                                     â”‚
                                     â–¼
                            Photos Tab (Grid)
                                     â”‚
                                     â–¼
                            Click â†’ Carousel View
```

---

## ğŸš€ Performance & Caching

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CACHING STRATEGY                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        FIRST REQUEST
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  /api/get-cafes  â”‚
                    â”‚                  â”‚
                    â”‚  1. Read Sheet   â”‚
                    â”‚  2. Parse data   â”‚
                    â”‚  3. Return JSON  â”‚
                    â”‚  4. Cache 5 min  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Server Cache (5 minutes)   â”‚
              â”‚  revalidate: 300            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Client Cache (cafe-data-service.ts)  â”‚
         â”‚  Duration: 5 minutes                   â”‚
         â”‚  cachedCafes + lastFetchTime          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
              SUBSEQUENT REQUESTS (< 5 min)
                           â”‚
                           â–¼
                  Returns cached data
                  (No API call needed!)
                           â”‚
                           â–¼
              AFTER 5 MINUTES: Cache expires
                           â”‚
                           â–¼
              Fetches fresh data from Sheet
                           â”‚
                           â–¼
                  Updates cache & repeat

BENEFITS:
â€¢ Fast page loads
â€¢ Reduced API calls
â€¢ Lower Google API quota usage
â€¢ Up-to-date data (max 5 min delay)
```

---

## âœ… Complete Feature Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FEATURE COMPLETENESS                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FORM FEATURES:
â”œâ”€ âœ… All required fields
â”œâ”€ âœ… Optional fields
â”œâ”€ âœ… Dynamic menu builder
â”œâ”€ âœ… Add/remove dishes
â”œâ”€ âœ… Mark recommended (max 5)
â”œâ”€ âœ… Cover image upload
â”œâ”€ âœ… Multiple photos (4-5)
â”œâ”€ âœ… Menu file upload (optional)
â”œâ”€ âœ… Auto price range calc
â”œâ”€ âœ… Field validation
â”œâ”€ âœ… Error messages
â”œâ”€ âœ… Success confirmation
â””â”€ âœ… Form reset after submit

BACKEND FEATURES:
â”œâ”€ âœ… Google Sheets integration
â”œâ”€ âœ… Google Drive integration
â”œâ”€ âœ… Service account auth
â”œâ”€ âœ… File uploads
â”œâ”€ âœ… Public file permissions
â”œâ”€ âœ… Data parsing
â”œâ”€ âœ… Error handling
â”œâ”€ âœ… Caching (5 min)
â””â”€ âœ… API endpoints

WEBSITE FEATURES:
â”œâ”€ âœ… Browse page
â”œâ”€ âœ… Filter & search
â”œâ”€ âœ… Guided matching
â”œâ”€ âœ… Random discovery
â”œâ”€ âœ… Detail pages
â”œâ”€ âœ… Photos tab âœ¨ NEW
â”œâ”€ âœ… Menu display
â”œâ”€ âœ… Contact info
â”œâ”€ âœ… Favorites
â”œâ”€ âœ… Responsive design
â””â”€ âœ… Fast loading

MATCHING FEATURES:
â”œâ”€ âœ… Mood (20%)
â”œâ”€ âœ… Ambience (11%)
â”œâ”€ âœ… Amenities (9%)
â”œâ”€ âœ… Food & Drinks (12%)
â”œâ”€ âœ… Price (12%)
â”œâ”€ âœ… Dishes (12%)
â”œâ”€ âœ… Rating (11%)
â””â”€ âœ… Promoter Rating (13%)

DOCUMENTATION:
â”œâ”€ âœ… README.md
â”œâ”€ âœ… Admin Guide
â”œâ”€ âœ… Testing Guide
â”œâ”€ âœ… Sheet Structure
â”œâ”€ âœ… File Structure
â”œâ”€ âœ… Project Status
â”œâ”€ âœ… Completion Summary
â”œâ”€ âœ… Final Checklist
â””â”€ âœ… This Visual Guide
```

---

## ğŸŠ System is 100% Complete!

```
   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘                                                       â•‘
   â•‘        ğŸ‰ ALL FEATURES IMPLEMENTED ğŸ‰                â•‘
   â•‘                                                       â•‘
   â•‘   âœ… Form submission working                         â•‘
   â•‘   âœ… Google integration complete                     â•‘
   â•‘   âœ… Website displaying correctly                    â•‘
   â•‘   âœ… Matching algorithm updated                      â•‘
   â•‘   âœ… Photos replacing reviews                        â•‘
   â•‘   âœ… Documentation complete                          â•‘
   â•‘                                                       â•‘
   â•‘           Ready to use with npm start! ğŸš€            â•‘
   â•‘                                                       â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```
